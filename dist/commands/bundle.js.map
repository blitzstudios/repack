{"version":3,"sources":["../../src/commands/bundle.ts"],"names":["bundle","_","config","args","webpackConfigPath","root","webpackConfig","cliOptions","JSON","stringify","reactNativePath","command","arguments","process","env","CLI_OPTIONS_ENV_KEY","argv","includes","VERBOSE_ENV_KEY","compiler","require","run","error","console","exit"],"mappings":";;;;;;;AACA;;AACA;;AAEA;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,MAAT,CAAgBC,CAAhB,EAA6BC,MAA7B,EAA6CC,IAA7C,EAAoE;AACzE,QAAMC,iBAAiB,GAAG,gDACxBF,MAAM,CAACG,IADiB,EAExBF,IAAI,CAACG,aAFmB,CAA1B;AAIA,QAAMC,UAAU,GAAGC,IAAI,CAACC,SAAL,CAAe;AAChCP,IAAAA,MAAM,EAAE;AACNG,MAAAA,IAAI,EAAEH,MAAM,CAACG,IADP;AAENK,MAAAA,eAAe,EAAER,MAAM,CAACQ,eAFlB;AAGNN,MAAAA;AAHM,KADwB;AAMhCO,IAAAA,OAAO,EAAE,QANuB;AAOhCC,IAAAA,SAAS,EAAE;AACTZ,MAAAA,MAAM,EAAEG;AADC;AAPqB,GAAf,CAAnB;AAYAU,EAAAA,OAAO,CAACC,GAAR,CAAYC,wBAAZ,IAAmCR,UAAnC;;AACA,MAAIM,OAAO,CAACG,IAAR,CAAaC,QAAb,CAAsB,WAAtB,CAAJ,EAAwC;AACtCJ,IAAAA,OAAO,CAACC,GAAR,CAAYI,oBAAZ,IAA+B,GAA/B;AACD;;AAED,QAAMC,QAAQ,GAAG,sBAAQC,OAAO,CAAChB,iBAAD,CAAf,CAAjB;AAEAe,EAAAA,QAAQ,CAACE,GAAT,CAAcC,KAAD,IAAW;AACtB,QAAIA,KAAJ,EAAW;AACTC,MAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAT,MAAAA,OAAO,CAACW,IAAR,CAAa,CAAb;AACD;AACF,GALD;AAMD","sourcesContent":["import { Config } from '@react-native-community/cli-types';\nimport webpack from 'webpack';\nimport { CLI_OPTIONS_ENV_KEY, VERBOSE_ENV_KEY } from '../env';\nimport { BundleArguments, CliOptions } from '../types';\nimport { getWebpackConfigPath } from './utils/getWebpackConfigPath';\n\n/**\n * Bundle command for React Native CLI.\n * It runs Webpack, builds bundle and saves it alongside any other assets and Source Map\n * to filesystem.\n *\n * @param _ Original, non-parsed arguments that were provided when running this command.\n * @param config React Native CLI configuration object.\n * @param args Parsed command line arguments.\n *\n * @internal\n * @category CLI command\n */\nexport function bundle(_: string[], config: Config, args: BundleArguments) {\n  const webpackConfigPath = getWebpackConfigPath(\n    config.root,\n    args.webpackConfig\n  );\n  const cliOptions = JSON.stringify({\n    config: {\n      root: config.root,\n      reactNativePath: config.reactNativePath,\n      webpackConfigPath,\n    },\n    command: 'bundle',\n    arguments: {\n      bundle: args,\n    },\n  } as CliOptions);\n\n  process.env[CLI_OPTIONS_ENV_KEY] = cliOptions;\n  if (process.argv.includes('--verbose')) {\n    process.env[VERBOSE_ENV_KEY] = '1';\n  }\n\n  const compiler = webpack(require(webpackConfigPath));\n\n  compiler.run((error) => {\n    if (error) {\n      console.error(error);\n      process.exit(2);\n    }\n  });\n}\n"],"file":"bundle.js"}