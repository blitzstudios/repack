{"version":3,"file":"getConfigFilePath.js","names":["_nodeFs","_interopRequireDefault","require","_nodeOs","_nodePath","_nodeUrl","_consts","e","__esModule","default","getConfigFilePath","root","candidates","candidate","filename","path","isAbsolute","join","fs","existsSync","extname","os","platform","url","pathToFileURL","href","Error","getWebpackConfigFilePath","customPath","DEFAULT_WEBPACK_CONFIG_LOCATIONS","getRspackConfigFilePath","DEFAULT_RSPACK_CONFIG_LOCATIONS"],"sources":["../../../src/commands/common/getConfigFilePath.ts"],"sourcesContent":["import fs from 'node:fs';\nimport os from 'node:os';\nimport path from 'node:path';\nimport url from 'node:url';\nimport {\n  DEFAULT_RSPACK_CONFIG_LOCATIONS,\n  DEFAULT_WEBPACK_CONFIG_LOCATIONS,\n} from '../consts';\n\nfunction getConfigFilePath(root: string, candidates: string[]) {\n  for (const candidate of candidates) {\n    const filename = path.isAbsolute(candidate)\n      ? candidate\n      : path.join(root, candidate);\n\n    if (fs.existsSync(filename)) {\n      if (path.extname(filename) === '.mjs' && os.platform() === 'win32') {\n        return url.pathToFileURL(filename).href;\n      }\n      return filename;\n    }\n  }\n\n  throw new Error('Cannot find configuration file');\n}\n\nexport function getWebpackConfigFilePath(root: string, customPath?: string) {\n  const candidates = customPath\n    ? [customPath]\n    : DEFAULT_WEBPACK_CONFIG_LOCATIONS;\n\n  try {\n    return getConfigFilePath(root, candidates);\n  } catch {\n    throw new Error('Cannot find Webpack configuration file');\n  }\n}\n\nexport function getRspackConfigFilePath(root: string, customPath?: string) {\n  const candidates = customPath\n    ? [customPath]\n    : DEFAULT_RSPACK_CONFIG_LOCATIONS;\n\n  try {\n    return getConfigFilePath(root, candidates);\n  } catch {\n    throw new Error('Cannot find Rspack configuration file');\n  }\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,SAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,QAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,OAAA,GAAAJ,OAAA;AAGmB,SAAAD,uBAAAM,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAEnB,SAASG,iBAAiBA,CAACC,IAAY,EAAEC,UAAoB,EAAE;EAC7D,KAAK,MAAMC,SAAS,IAAID,UAAU,EAAE;IAClC,MAAME,QAAQ,GAAGC,iBAAI,CAACC,UAAU,CAACH,SAAS,CAAC,GACvCA,SAAS,GACTE,iBAAI,CAACE,IAAI,CAACN,IAAI,EAAEE,SAAS,CAAC;IAE9B,IAAIK,eAAE,CAACC,UAAU,CAACL,QAAQ,CAAC,EAAE;MAC3B,IAAIC,iBAAI,CAACK,OAAO,CAACN,QAAQ,CAAC,KAAK,MAAM,IAAIO,eAAE,CAACC,QAAQ,CAAC,CAAC,KAAK,OAAO,EAAE;QAClE,OAAOC,gBAAG,CAACC,aAAa,CAACV,QAAQ,CAAC,CAACW,IAAI;MACzC;MACA,OAAOX,QAAQ;IACjB;EACF;EAEA,MAAM,IAAIY,KAAK,CAAC,gCAAgC,CAAC;AACnD;AAEO,SAASC,wBAAwBA,CAAChB,IAAY,EAAEiB,UAAmB,EAAE;EAC1E,MAAMhB,UAAU,GAAGgB,UAAU,GACzB,CAACA,UAAU,CAAC,GACZC,wCAAgC;EAEpC,IAAI;IACF,OAAOnB,iBAAiB,CAACC,IAAI,EAAEC,UAAU,CAAC;EAC5C,CAAC,CAAC,MAAM;IACN,MAAM,IAAIc,KAAK,CAAC,wCAAwC,CAAC;EAC3D;AACF;AAEO,SAASI,uBAAuBA,CAACnB,IAAY,EAAEiB,UAAmB,EAAE;EACzE,MAAMhB,UAAU,GAAGgB,UAAU,GACzB,CAACA,UAAU,CAAC,GACZG,uCAA+B;EAEnC,IAAI;IACF,OAAOrB,iBAAiB,CAACC,IAAI,EAAEC,UAAU,CAAC;EAC5C,CAAC,CAAC,MAAM;IACN,MAAM,IAAIc,KAAK,CAAC,uCAAuC,CAAC;EAC1D;AACF","ignoreList":[]}