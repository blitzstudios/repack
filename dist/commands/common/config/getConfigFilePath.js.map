{"version":3,"file":"getConfigFilePath.js","names":["_nodeFs","_interopRequireDefault","require","_nodePath","_consts","_cliError","e","__esModule","default","discoverConfigFilePath","root","candidates","candidate","filename","path","isAbsolute","join","fs","existsSync","CLIError","getWebpackConfigFilePath","customPath","DEFAULT_WEBPACK_CONFIG_LOCATIONS","getRspackConfigFilePath","DEFAULT_RSPACK_CONFIG_LOCATIONS","getConfigFilePath","bundler"],"sources":["../../../../src/commands/common/config/getConfigFilePath.ts"],"sourcesContent":["import fs from 'node:fs';\nimport path from 'node:path';\nimport {\n  DEFAULT_RSPACK_CONFIG_LOCATIONS,\n  DEFAULT_WEBPACK_CONFIG_LOCATIONS,\n} from '../../consts.js';\nimport { CLIError } from '../cliError.js';\n\nfunction discoverConfigFilePath(root: string, candidates: string[]) {\n  for (const candidate of candidates) {\n    const filename = path.isAbsolute(candidate)\n      ? candidate\n      : path.join(root, candidate);\n\n    if (fs.existsSync(filename)) {\n      return filename;\n    }\n  }\n\n  throw new CLIError('Cannot find configuration file');\n}\n\nfunction getWebpackConfigFilePath(root: string, customPath?: string) {\n  const candidates = customPath\n    ? [customPath]\n    : DEFAULT_WEBPACK_CONFIG_LOCATIONS;\n\n  try {\n    return discoverConfigFilePath(root, candidates);\n  } catch {\n    throw new CLIError('Cannot find Webpack configuration file');\n  }\n}\n\nfunction getRspackConfigFilePath(root: string, customPath?: string) {\n  const candidates = customPath\n    ? [customPath]\n    : DEFAULT_RSPACK_CONFIG_LOCATIONS;\n\n  try {\n    return discoverConfigFilePath(root, candidates);\n  } catch {\n    throw new CLIError('Cannot find Rspack configuration file');\n  }\n}\n\nexport function getConfigFilePath(\n  bundler: 'rspack' | 'webpack',\n  root: string,\n  customPath?: string\n) {\n  switch (bundler) {\n    case 'rspack':\n      return getRspackConfigFilePath(root, customPath);\n    case 'webpack':\n      return getWebpackConfigFilePath(root, customPath);\n  }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,SAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,OAAA,GAAAF,OAAA;AAIA,IAAAG,SAAA,GAAAH,OAAA;AAA0C,SAAAD,uBAAAK,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE1C,SAASG,sBAAsBA,CAACC,IAAY,EAAEC,UAAoB,EAAE;EAClE,KAAK,MAAMC,SAAS,IAAID,UAAU,EAAE;IAClC,MAAME,QAAQ,GAAGC,iBAAI,CAACC,UAAU,CAACH,SAAS,CAAC,GACvCA,SAAS,GACTE,iBAAI,CAACE,IAAI,CAACN,IAAI,EAAEE,SAAS,CAAC;IAE9B,IAAIK,eAAE,CAACC,UAAU,CAACL,QAAQ,CAAC,EAAE;MAC3B,OAAOA,QAAQ;IACjB;EACF;EAEA,MAAM,IAAIM,kBAAQ,CAAC,gCAAgC,CAAC;AACtD;AAEA,SAASC,wBAAwBA,CAACV,IAAY,EAAEW,UAAmB,EAAE;EACnE,MAAMV,UAAU,GAAGU,UAAU,GACzB,CAACA,UAAU,CAAC,GACZC,wCAAgC;EAEpC,IAAI;IACF,OAAOb,sBAAsB,CAACC,IAAI,EAAEC,UAAU,CAAC;EACjD,CAAC,CAAC,MAAM;IACN,MAAM,IAAIQ,kBAAQ,CAAC,wCAAwC,CAAC;EAC9D;AACF;AAEA,SAASI,uBAAuBA,CAACb,IAAY,EAAEW,UAAmB,EAAE;EAClE,MAAMV,UAAU,GAAGU,UAAU,GACzB,CAACA,UAAU,CAAC,GACZG,uCAA+B;EAEnC,IAAI;IACF,OAAOf,sBAAsB,CAACC,IAAI,EAAEC,UAAU,CAAC;EACjD,CAAC,CAAC,MAAM;IACN,MAAM,IAAIQ,kBAAQ,CAAC,uCAAuC,CAAC;EAC7D;AACF;AAEO,SAASM,iBAAiBA,CAC/BC,OAA6B,EAC7BhB,IAAY,EACZW,UAAmB,EACnB;EACA,QAAQK,OAAO;IACb,KAAK,QAAQ;MACX,OAAOH,uBAAuB,CAACb,IAAI,EAAEW,UAAU,CAAC;IAClD,KAAK,SAAS;MACZ,OAAOD,wBAAwB,CAACV,IAAI,EAAEW,UAAU,CAAC;EACrD;AACF","ignoreList":[]}