{"version":3,"file":"getCliOverrides.js","names":["_nodePath","_interopRequireDefault","require","e","__esModule","default","normalizeEntryFile","entryFile","path","isAbsolute","startsWith","getCliOverrides","opts","overrides","command","bundleArgs","args","mode","dev","optimization","minimize","minify","entry","startArgs","devServer","port","host","undefined","server","https","type","options","key","cert"],"sources":["../../../../src/commands/common/config/getCliOverrides.ts"],"sourcesContent":["import path from 'node:path';\nimport type {\n  BundleArguments,\n  ConfigurationObject,\n  StartArguments,\n} from '../../types.js';\n\nfunction normalizeEntryFile(entryFile: string) {\n  return path.isAbsolute(entryFile) || entryFile.startsWith('./')\n    ? entryFile\n    : `./${entryFile}`;\n}\n\ninterface GetCliOverridesOptions {\n  args: StartArguments | BundleArguments;\n  command: 'start' | 'bundle';\n}\n\nexport function getCliOverrides<C extends ConfigurationObject>(\n  opts: GetCliOverridesOptions\n): Partial<C> {\n  const overrides: Partial<C> = {};\n\n  if (opts.command === 'bundle') {\n    const bundleArgs = opts.args as BundleArguments;\n    overrides.mode = bundleArgs.dev ? 'development' : 'production';\n    overrides.optimization = { minimize: bundleArgs.minify };\n    overrides.entry = normalizeEntryFile(bundleArgs.entryFile);\n  } else {\n    const startArgs = opts.args as StartArguments;\n    overrides.devServer = {\n      port: startArgs.port,\n      host: startArgs.host || undefined,\n      server: startArgs.https\n        ? {\n            type: 'https',\n            options: {\n              key: startArgs.key,\n              cert: startArgs.cert,\n            },\n          }\n        : undefined,\n    };\n  }\n\n  return overrides;\n}\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AAA6B,SAAAD,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAO7B,SAASG,kBAAkBA,CAACC,SAAiB,EAAE;EAC7C,OAAOC,iBAAI,CAACC,UAAU,CAACF,SAAS,CAAC,IAAIA,SAAS,CAACG,UAAU,CAAC,IAAI,CAAC,GAC3DH,SAAS,GACT,KAAKA,SAAS,EAAE;AACtB;AAOO,SAASI,eAAeA,CAC7BC,IAA4B,EAChB;EACZ,MAAMC,SAAqB,GAAG,CAAC,CAAC;EAEhC,IAAID,IAAI,CAACE,OAAO,KAAK,QAAQ,EAAE;IAC7B,MAAMC,UAAU,GAAGH,IAAI,CAACI,IAAuB;IAC/CH,SAAS,CAACI,IAAI,GAAGF,UAAU,CAACG,GAAG,GAAG,aAAa,GAAG,YAAY;IAC9DL,SAAS,CAACM,YAAY,GAAG;MAAEC,QAAQ,EAAEL,UAAU,CAACM;IAAO,CAAC;IACxDR,SAAS,CAACS,KAAK,GAAGhB,kBAAkB,CAACS,UAAU,CAACR,SAAS,CAAC;EAC5D,CAAC,MAAM;IACL,MAAMgB,SAAS,GAAGX,IAAI,CAACI,IAAsB;IAC7CH,SAAS,CAACW,SAAS,GAAG;MACpBC,IAAI,EAAEF,SAAS,CAACE,IAAI;MACpBC,IAAI,EAAEH,SAAS,CAACG,IAAI,IAAIC,SAAS;MACjCC,MAAM,EAAEL,SAAS,CAACM,KAAK,GACnB;QACEC,IAAI,EAAE,OAAO;QACbC,OAAO,EAAE;UACPC,GAAG,EAAET,SAAS,CAACS,GAAG;UAClBC,IAAI,EAAEV,SAAS,CAACU;QAClB;MACF,CAAC,GACDN;IACN,CAAC;EACH;EAEA,OAAOd,SAAS;AAClB","ignoreList":[]}