{"version":3,"file":"getSwcLoaderOptions.js","names":["getEnvironmentPreset","targets","node","include","getCompilerAssumptions","setPublicClassFields","privateFieldsAsProperties","getParserOptions","syntax","jsx","exportDefaultFrom","tsx","getJSCTransformOptions","jsxRuntime","importSource","react","runtime","development","getModuleOptions","disableImportExportTransform","lazyImports","undefined","type","strict","strictMode","noInterop","lazy","allowTopLevelThis","ignoreDynamic","getSwcLoaderOptions","externalHelpers","env","jsc","assumptions","parser","transform","module"],"sources":["../../src/utils/getSwcLoaderOptions.ts"],"sourcesContent":["function getEnvironmentPreset() {\n  return {\n    // disable all transforms (node supports everything)\n    targets: { node: 24 },\n    // add transforms manually that match the RN preset\n    include: [\n      'transform-block-scoping',\n      'transform-class-properties',\n      'transform-private-methods',\n      'transform-private-property-in-object',\n      'transform-classes',\n      'transform-destructuring',\n      'transform-async-to-generator',\n      'transform-async-generator-functions',\n      'transform-unicode-regex',\n      'transform-named-capturing-groups-regex',\n      'transform-optional-chaining',\n      // dependencies of some of the transforms above\n      'transform-spread',\n      'transform-object-rest-spread',\n      'transform-class-static-block',\n    ],\n  };\n}\n\nfunction getCompilerAssumptions() {\n  return {\n    // Loose mode for: transform-class-properties\n    setPublicClassFields: true,\n    // Loose mode for: transform-private-fields, transform-private-property-in-object\n    privateFieldsAsProperties: true,\n  };\n}\n\nfunction getParserOptions(syntax: 'js' | 'ts', jsx: boolean) {\n  return syntax === 'js'\n    ? {\n        syntax: 'ecmascript',\n        jsx: jsx,\n        exportDefaultFrom: true,\n      }\n    : {\n        syntax: 'typescript',\n        tsx: jsx,\n      };\n}\n\nfunction getJSCTransformOptions(\n  jsxRuntime: 'automatic' | 'classic',\n  importSource: string\n) {\n  return {\n    react: {\n      runtime: jsxRuntime,\n      development: jsxRuntime === 'classic',\n      importSource,\n    },\n  };\n}\n\nfunction getModuleOptions(\n  disableImportExportTransform: boolean,\n  lazyImports: boolean | string[] = false\n) {\n  return disableImportExportTransform\n    ? undefined\n    : {\n        type: 'commonjs',\n        strict: false,\n        strictMode: false,\n        noInterop: false,\n        lazy: lazyImports,\n        allowTopLevelThis: true,\n        ignoreDynamic: true,\n      };\n}\n\n/**\n * Interface for {@link getSwcLoaderOptions} options.\n */\ninterface MakeSwcLoaderConfigOptions {\n  /**\n   * The source code syntax type.\n   * Use 'js' for JavaScript or 'ts' for TypeScript source files.\n   */\n  syntax: 'js' | 'ts';\n\n  /**\n   * Whether to enable JSX/TSX parsing and transformation.\n   */\n  jsx: boolean;\n\n  /**\n   * Whether to use external helpers for transformations.\n   * See SWC `jsc.externalHelpers` documentation:\n   * https://swc.rs/docs/configuration/compilation#jscexternalhelpers\n   */\n  externalHelpers?: boolean;\n\n  /**\n   * The JSX runtime to use - 'automatic' for React 17+ new JSX transform or 'classic' for traditional JSX transform.\n   * See SWC `jsc.transform.react.runtime`:\n   * https://swc.rs/docs/configuration/compilation#jsctransformreactruntime\n   */\n  jsxRuntime?: 'automatic' | 'classic';\n\n  /**\n   * Whether to disable transformation of import/export statements.\n   */\n  disableImportExportTransform?: boolean;\n\n  /**\n   * The source module for JSX runtime imports.\n   * See SWC `jsc.transform.react.importSource`:\n   * https://swc.rs/docs/configuration/compilation#jsctransformreactimportsource\n   */\n  importSource?: string;\n\n  /**\n   * Enable lazy loading for all imports or specific modules.\n   * See SWC `module.lazy`:\n   * https://swc.rs/docs/configuration/modules#lazy\n   */\n  lazyImports?: boolean | string[];\n}\n\n/**\n * Creates SWC loader configuration options for React Native bundling.\n *\n * @param options Configuration options for the SWC loader\n * @param options.syntax The source code syntax type ('js' for JavaScript or 'ts' for TypeScript)\n * @param options.jsx Whether to enable JSX parsing and transformation\n * @param options.externalHelpers Whether to use external helpers for transformations (equivalent of `@babel/runtime`)\n * @param options.jsxRuntime The JSX runtime to use ('automatic' for React 17+ new JSX transform or 'classic' for traditional JSX transform)\n * @param options.disableImportExportTransform Whether to disable transformation of import/export statements\n * @param options.importSource The source module for JSX runtime imports (defaults to 'react')\n * @param options.lazyImports Enable lazy loading for all imports or specific modules\n *\n * @returns SWC loader configuration for the React Native target\n */\nexport function getSwcLoaderOptions({\n  syntax,\n  jsx,\n  externalHelpers = true,\n  jsxRuntime = 'automatic',\n  disableImportExportTransform = false,\n  importSource = 'react',\n  lazyImports = false,\n}: MakeSwcLoaderConfigOptions) {\n  return {\n    env: getEnvironmentPreset(),\n    jsc: {\n      assumptions: getCompilerAssumptions(),\n      externalHelpers: externalHelpers,\n      parser: getParserOptions(syntax, jsx),\n      transform: getJSCTransformOptions(jsxRuntime, importSource),\n    },\n    module: getModuleOptions(disableImportExportTransform, lazyImports),\n  };\n}\n"],"mappings":";;;;;;AAAA,SAASA,oBAAoBA,CAAA,EAAG;EAC9B,OAAO;IACL;IACAC,OAAO,EAAE;MAAEC,IAAI,EAAE;IAAG,CAAC;IACrB;IACAC,OAAO,EAAE,CACP,yBAAyB,EACzB,4BAA4B,EAC5B,2BAA2B,EAC3B,sCAAsC,EACtC,mBAAmB,EACnB,yBAAyB,EACzB,8BAA8B,EAC9B,qCAAqC,EACrC,yBAAyB,EACzB,wCAAwC,EACxC,6BAA6B;IAC7B;IACA,kBAAkB,EAClB,8BAA8B,EAC9B,8BAA8B;EAElC,CAAC;AACH;AAEA,SAASC,sBAAsBA,CAAA,EAAG;EAChC,OAAO;IACL;IACAC,oBAAoB,EAAE,IAAI;IAC1B;IACAC,yBAAyB,EAAE;EAC7B,CAAC;AACH;AAEA,SAASC,gBAAgBA,CAACC,MAAmB,EAAEC,GAAY,EAAE;EAC3D,OAAOD,MAAM,KAAK,IAAI,GAClB;IACEA,MAAM,EAAE,YAAY;IACpBC,GAAG,EAAEA,GAAG;IACRC,iBAAiB,EAAE;EACrB,CAAC,GACD;IACEF,MAAM,EAAE,YAAY;IACpBG,GAAG,EAAEF;EACP,CAAC;AACP;AAEA,SAASG,sBAAsBA,CAC7BC,UAAmC,EACnCC,YAAoB,EACpB;EACA,OAAO;IACLC,KAAK,EAAE;MACLC,OAAO,EAAEH,UAAU;MACnBI,WAAW,EAAEJ,UAAU,KAAK,SAAS;MACrCC;IACF;EACF,CAAC;AACH;AAEA,SAASI,gBAAgBA,CACvBC,4BAAqC,EACrCC,WAA+B,GAAG,KAAK,EACvC;EACA,OAAOD,4BAA4B,GAC/BE,SAAS,GACT;IACEC,IAAI,EAAE,UAAU;IAChBC,MAAM,EAAE,KAAK;IACbC,UAAU,EAAE,KAAK;IACjBC,SAAS,EAAE,KAAK;IAChBC,IAAI,EAAEN,WAAW;IACjBO,iBAAiB,EAAE,IAAI;IACvBC,aAAa,EAAE;EACjB,CAAC;AACP;;AAEA;AACA;AACA;;AA+CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,mBAAmBA,CAAC;EAClCrB,MAAM;EACNC,GAAG;EACHqB,eAAe,GAAG,IAAI;EACtBjB,UAAU,GAAG,WAAW;EACxBM,4BAA4B,GAAG,KAAK;EACpCL,YAAY,GAAG,OAAO;EACtBM,WAAW,GAAG;AACY,CAAC,EAAE;EAC7B,OAAO;IACLW,GAAG,EAAE/B,oBAAoB,CAAC,CAAC;IAC3BgC,GAAG,EAAE;MACHC,WAAW,EAAE7B,sBAAsB,CAAC,CAAC;MACrC0B,eAAe,EAAEA,eAAe;MAChCI,MAAM,EAAE3B,gBAAgB,CAACC,MAAM,EAAEC,GAAG,CAAC;MACrC0B,SAAS,EAAEvB,sBAAsB,CAACC,UAAU,EAAEC,YAAY;IAC5D,CAAC;IACDsB,MAAM,EAAElB,gBAAgB,CAACC,4BAA4B,EAAEC,WAAW;EACpE,CAAC;AACH","ignoreList":[]}