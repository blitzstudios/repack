{"version":3,"file":"reactRefreshCompatLoader.js","names":["_dedent","_interopRequireDefault","require","e","__esModule","default","reactRefreshFooter","dedent","raw","exports","reactRefreshCompatLoader","originalSource","sourceMap","meta","callback","async","source"],"sources":["../../../src/loaders/reactRefreshCompatLoader/reactRefreshCompatLoader.ts"],"sourcesContent":["import type { LoaderContext } from '@rspack/core';\nimport dedent from 'dedent';\n\nconst reactRefreshFooter = dedent(`\n  function $RefreshSig$() {\n    return $ReactRefreshRuntime$.createSignatureFunctionForTransform();\n  }\n\n  function $RefreshReg$(type, id) {\n    $ReactRefreshRuntime$.register(type, __webpack_module__.id + \"_\" + id);\n  }\n\n  Promise.resolve().then(function() {\n    $ReactRefreshRuntime$.refresh(__webpack_module__.id, __webpack_module__.hot);\n  });\n`);\n\nexport const raw = false;\n\n/**\n * This loader is used in Webpack configuration as a fallback loader for 'builtin:react-refresh-loader' from Rspack.\n * Thanks to this loader, which mimics the one written in Rust, we can utilize \"@rspack/plugin-react-refresh\" in Webpack as well,\n * instead of relying on \"@pmmmwh/react-refresh-webpack-plugin\".\n *\n * Reference implementation: https://github.com/web-infra-dev/rspack/blob/main/crates/rspack_loader_react_refresh/src/lib.rs\n */\nexport default function reactRefreshCompatLoader(\n  this: LoaderContext,\n  originalSource: string,\n  sourceMap: any,\n  meta: any\n) {\n  const callback = this.async();\n\n  const source = `${originalSource}\\n\\n${reactRefreshFooter}`;\n\n  callback(null, source, sourceMap, meta);\n}\n"],"mappings":";;;;;;;AACA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAA4B,SAAAD,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE5B,MAAMG,kBAAkB,GAAG,IAAAC,eAAM,EAAC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC;AAEK,MAAMC,GAAG,GAAAC,OAAA,CAAAD,GAAA,GAAG,KAAK;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASE,wBAAwBA,CAE9CC,cAAsB,EACtBC,SAAc,EACdC,IAAS,EACT;EACA,MAAMC,QAAQ,GAAG,IAAI,CAACC,KAAK,CAAC,CAAC;EAE7B,MAAMC,MAAM,GAAG,GAAGL,cAAc,OAAOL,kBAAkB,EAAE;EAE3DQ,QAAQ,CAAC,IAAI,EAAEE,MAAM,EAAEJ,SAAS,EAAEC,IAAI,CAAC;AACzC","ignoreList":[]}