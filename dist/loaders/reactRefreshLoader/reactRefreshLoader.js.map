{"version":3,"file":"reactRefreshLoader.js","names":["_dedent","_interopRequireDefault","require","e","__esModule","default","reactRefreshFooter","dedent","raw","exports","reactRefreshLoader","originalSource","sourceMap","meta","cacheable","callback","async","source"],"sources":["../../../src/loaders/reactRefreshLoader/reactRefreshLoader.ts"],"sourcesContent":["import type { LoaderContext } from '@rspack/core';\nimport dedent from 'dedent';\n\nconst reactRefreshFooter = dedent(`\n  function $RefreshSig$() {\n    return $ReactRefreshRuntime$.createSignatureFunctionForTransform();\n  }\n\n  function $RefreshReg$(type, id) {\n    $ReactRefreshRuntime$.register(type, __webpack_module__.id + \"_\" + id);\n  }\n\n  if (typeof setImmediate !== \"undefined\") {\n    Promise.resolve().then(function() {\n      $ReactRefreshRuntime$.refresh(__webpack_module__.id, __webpack_module__.hot);\n    });\n  }\n`);\n\nexport const raw = false;\n\n/**\n * This loader adds React Refresh signatures to the source files, which enables Hot Module Replacement (HMR)\n * for React components. It appends necessary runtime code to register and refresh React components.\n *\n * Works the same as 'builtin:react-refresh-loader' from '@rspack/plugin-react-refresh'\n * but accounts for React Native runtime specifics.\n *\n * Reference implementation: https://github.com/web-infra-dev/rspack/blob/main/crates/rspack_loader_react_refresh/src/lib.rs\n */\nexport default function reactRefreshLoader(\n  this: LoaderContext,\n  originalSource: string,\n  sourceMap: any,\n  meta: any\n) {\n  this.cacheable();\n  const callback = this.async();\n\n  const source = `${originalSource}\\n\\n${reactRefreshFooter}`;\n\n  callback(null, source, sourceMap, meta);\n}\n"],"mappings":";;;;;;;AACA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAA4B,SAAAD,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE5B,MAAMG,kBAAkB,GAAG,IAAAC,eAAM,EAAC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC;AAEK,MAAMC,GAAG,GAAAC,OAAA,CAAAD,GAAA,GAAG,KAAK;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASE,kBAAkBA,CAExCC,cAAsB,EACtBC,SAAc,EACdC,IAAS,EACT;EACA,IAAI,CAACC,SAAS,CAAC,CAAC;EAChB,MAAMC,QAAQ,GAAG,IAAI,CAACC,KAAK,CAAC,CAAC;EAE7B,MAAMC,MAAM,GAAG,GAAGN,cAAc,OAAOL,kBAAkB,EAAE;EAE3DS,QAAQ,CAAC,IAAI,EAAEE,MAAM,EAAEL,SAAS,EAAEC,IAAI,CAAC;AACzC","ignoreList":[]}