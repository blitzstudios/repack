{"version":3,"file":"CorePlugin.js","names":["RepackCorePlugin","name","loadEntry","remoteInfo","client","require","ScriptManager","getWebpackContext","entry","entryGlobalName","shared","loadScript","undefined","globalThis","Error","console","error","generatePreloadAssets","Promise","resolve","cssAssets","jsAssetsWithoutEntry","entryAssets"],"sources":["../../../src/modules/FederationRuntimePlugins/CorePlugin.ts"],"sourcesContent":["import type { FederationRuntimePlugin } from '@module-federation/enhanced/runtime';\nimport type * as RepackClient from '../ScriptManager/index.js';\n\nconst RepackCorePlugin: () => FederationRuntimePlugin = () => ({\n  name: 'repack-core-plugin',\n  loadEntry: async ({ remoteInfo }) => {\n    const client = require('../ScriptManager/index.js') as typeof RepackClient;\n    const { ScriptManager, getWebpackContext } = client;\n    const { entry, entryGlobalName } = remoteInfo;\n\n    try {\n      await ScriptManager.shared.loadScript(\n        entryGlobalName,\n        undefined,\n        getWebpackContext(),\n        entry\n      );\n\n      // @ts-ignore\n      if (!globalThis[entryGlobalName]) {\n        throw new Error();\n      }\n\n      // @ts-ignore\n      return globalThis[entryGlobalName];\n    } catch {\n      console.error(`Failed to load remote entry: ${entryGlobalName}`);\n    }\n  },\n  generatePreloadAssets: async () => {\n    // noop for compatibility\n    return Promise.resolve({\n      cssAssets: [],\n      jsAssetsWithoutEntry: [],\n      entryAssets: [],\n    });\n  },\n});\n\nexport default RepackCorePlugin;\n"],"mappings":"AAGA,MAAMA,gBAA+C,GAAGA,CAAA,MAAO;EAC7DC,IAAI,EAAE,oBAAoB;EAC1BC,SAAS,EAAE,MAAAA,CAAO;IAAEC;EAAW,CAAC,KAAK;IACnC,MAAMC,MAAM,GAAGC,OAAO,CAAC,2BAA2B,CAAwB;IAC1E,MAAM;MAAEC,aAAa;MAAEC;IAAkB,CAAC,GAAGH,MAAM;IACnD,MAAM;MAAEI,KAAK;MAAEC;IAAgB,CAAC,GAAGN,UAAU;IAE7C,IAAI;MACF,MAAMG,aAAa,CAACI,MAAM,CAACC,UAAU,CACnCF,eAAe,EACfG,SAAS,EACTL,iBAAiB,CAAC,CAAC,EACnBC,KACF,CAAC;;MAED;MACA,IAAI,CAACK,UAAU,CAACJ,eAAe,CAAC,EAAE;QAChC,MAAM,IAAIK,KAAK,CAAC,CAAC;MACnB;;MAEA;MACA,OAAOD,UAAU,CAACJ,eAAe,CAAC;IACpC,CAAC,CAAC,MAAM;MACNM,OAAO,CAACC,KAAK,CAAC,gCAAgCP,eAAe,EAAE,CAAC;IAClE;EACF,CAAC;EACDQ,qBAAqB,EAAE,MAAAA,CAAA,KAAY;IACjC;IACA,OAAOC,OAAO,CAACC,OAAO,CAAC;MACrBC,SAAS,EAAE,EAAE;MACbC,oBAAoB,EAAE,EAAE;MACxBC,WAAW,EAAE;IACf,CAAC,CAAC;EACJ;AACF,CAAC,CAAC;AAEF,eAAetB,gBAAgB","ignoreList":[]}