{"version":3,"file":"config.js","names":["_schemaUtils","require","ruleSchema","anyOf","type","instanceof","items","configSchema","properties","context","platform","enabled","output","auxiliaryAssetsPath","additionalProperties","extraChunks","test","include","exclude","const","outputPath","required","validateConfig","config","validate","name","getDeprecationMessages","deprecationMessages","push"],"sources":["../../../src/plugins/OutputPlugin/config.ts"],"sourcesContent":["import { validate } from 'schema-utils';\nimport type { OutputPluginConfig } from './types.js';\n\ntype Schema = Parameters<typeof validate>[0];\n\nconst ruleSchema: Schema = {\n  anyOf: [\n    { type: 'string' },\n    { instanceof: 'RegExp' },\n    {\n      type: 'array',\n      items: {\n        anyOf: [{ type: 'string' }, { instanceof: 'RegExp' }],\n      },\n    },\n  ],\n};\n\nconst configSchema: Schema = {\n  type: 'object',\n  properties: {\n    context: { type: 'string' },\n    platform: { type: 'string' },\n    enabled: { type: 'boolean' },\n    output: {\n      type: 'object',\n      properties: {\n        auxiliaryAssetsPath: { type: 'string' },\n      },\n      additionalProperties: true,\n    },\n    extraChunks: {\n      type: 'array',\n      items: {\n        anyOf: [\n          {\n            type: 'object',\n            properties: {\n              test: ruleSchema,\n              include: ruleSchema,\n              exclude: ruleSchema,\n              type: { const: 'remote' },\n              outputPath: { type: 'string' },\n            },\n            required: ['type', 'outputPath'],\n            additionalProperties: false,\n          },\n          {\n            type: 'object',\n            properties: {\n              test: ruleSchema,\n              include: ruleSchema,\n              exclude: ruleSchema,\n              type: { const: 'local' },\n            },\n            required: ['type'],\n            additionalProperties: false,\n          },\n        ],\n      },\n    },\n  },\n  required: ['context', 'platform', 'output'],\n  additionalProperties: false,\n};\n\nexport function validateConfig(config: OutputPluginConfig) {\n  validate(configSchema, config, { name: 'RepackOutputPlugin' });\n}\n\nexport function getDeprecationMessages(config: OutputPluginConfig) {\n  const deprecationMessages: string[] = [];\n\n  if ('bundleFilename' in config.output) {\n    deprecationMessages.push(\n      '[NOTICE] `output.bundleFilename` is deprecated since Re.Pack v5.0.0. ' +\n        'This option has no effect and will be removed in the next major version. ' +\n        'Value passed through CLI flag `--bundle-output` always takes precedence.'\n    );\n  }\n\n  if ('sourceMapFilename' in config.output) {\n    deprecationMessages.push(\n      '[NOTICE] `output.sourceMapFilename` is deprecated since Re.Pack v5.0.0. ' +\n        'This option has no effect and will be removed in the next major version. ' +\n        'Value passed through CLI flag `--sourcemap-output` always takes precedence.'\n    );\n  }\n\n  if ('assetsPath' in config.output) {\n    deprecationMessages.push(\n      '[NOTICE] `output.assetsPath` is deprecated since Re.Pack v5.0.0. ' +\n        'This option has no effect and will be removed in the next major version. ' +\n        'Value passed through CLI flag `--assets-dest` always takes precedence.'\n    );\n  }\n\n  return deprecationMessages;\n}\n"],"mappings":";;;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AAKA,MAAMC,UAAkB,GAAG;EACzBC,KAAK,EAAE,CACL;IAAEC,IAAI,EAAE;EAAS,CAAC,EAClB;IAAEC,UAAU,EAAE;EAAS,CAAC,EACxB;IACED,IAAI,EAAE,OAAO;IACbE,KAAK,EAAE;MACLH,KAAK,EAAE,CAAC;QAAEC,IAAI,EAAE;MAAS,CAAC,EAAE;QAAEC,UAAU,EAAE;MAAS,CAAC;IACtD;EACF,CAAC;AAEL,CAAC;AAED,MAAME,YAAoB,GAAG;EAC3BH,IAAI,EAAE,QAAQ;EACdI,UAAU,EAAE;IACVC,OAAO,EAAE;MAAEL,IAAI,EAAE;IAAS,CAAC;IAC3BM,QAAQ,EAAE;MAAEN,IAAI,EAAE;IAAS,CAAC;IAC5BO,OAAO,EAAE;MAAEP,IAAI,EAAE;IAAU,CAAC;IAC5BQ,MAAM,EAAE;MACNR,IAAI,EAAE,QAAQ;MACdI,UAAU,EAAE;QACVK,mBAAmB,EAAE;UAAET,IAAI,EAAE;QAAS;MACxC,CAAC;MACDU,oBAAoB,EAAE;IACxB,CAAC;IACDC,WAAW,EAAE;MACXX,IAAI,EAAE,OAAO;MACbE,KAAK,EAAE;QACLH,KAAK,EAAE,CACL;UACEC,IAAI,EAAE,QAAQ;UACdI,UAAU,EAAE;YACVQ,IAAI,EAAEd,UAAU;YAChBe,OAAO,EAAEf,UAAU;YACnBgB,OAAO,EAAEhB,UAAU;YACnBE,IAAI,EAAE;cAAEe,KAAK,EAAE;YAAS,CAAC;YACzBC,UAAU,EAAE;cAAEhB,IAAI,EAAE;YAAS;UAC/B,CAAC;UACDiB,QAAQ,EAAE,CAAC,MAAM,EAAE,YAAY,CAAC;UAChCP,oBAAoB,EAAE;QACxB,CAAC,EACD;UACEV,IAAI,EAAE,QAAQ;UACdI,UAAU,EAAE;YACVQ,IAAI,EAAEd,UAAU;YAChBe,OAAO,EAAEf,UAAU;YACnBgB,OAAO,EAAEhB,UAAU;YACnBE,IAAI,EAAE;cAAEe,KAAK,EAAE;YAAQ;UACzB,CAAC;UACDE,QAAQ,EAAE,CAAC,MAAM,CAAC;UAClBP,oBAAoB,EAAE;QACxB,CAAC;MAEL;IACF;EACF,CAAC;EACDO,QAAQ,EAAE,CAAC,SAAS,EAAE,UAAU,EAAE,QAAQ,CAAC;EAC3CP,oBAAoB,EAAE;AACxB,CAAC;AAEM,SAASQ,cAAcA,CAACC,MAA0B,EAAE;EACzD,IAAAC,qBAAQ,EAACjB,YAAY,EAAEgB,MAAM,EAAE;IAAEE,IAAI,EAAE;EAAqB,CAAC,CAAC;AAChE;AAEO,SAASC,sBAAsBA,CAACH,MAA0B,EAAE;EACjE,MAAMI,mBAA6B,GAAG,EAAE;EAExC,IAAI,gBAAgB,IAAIJ,MAAM,CAACX,MAAM,EAAE;IACrCe,mBAAmB,CAACC,IAAI,CACtB,uEAAuE,GACrE,2EAA2E,GAC3E,0EACJ,CAAC;EACH;EAEA,IAAI,mBAAmB,IAAIL,MAAM,CAACX,MAAM,EAAE;IACxCe,mBAAmB,CAACC,IAAI,CACtB,0EAA0E,GACxE,2EAA2E,GAC3E,6EACJ,CAAC;EACH;EAEA,IAAI,YAAY,IAAIL,MAAM,CAACX,MAAM,EAAE;IACjCe,mBAAmB,CAACC,IAAI,CACtB,mEAAmE,GACjE,2EAA2E,GAC3E,wEACJ,CAAC;EACH;EAEA,OAAOD,mBAAmB;AAC5B","ignoreList":[]}