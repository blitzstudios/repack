{"version":3,"file":"ManifestPlugin.js","names":["ManifestPlugin","apply","compiler","hooks","compilation","tap","afterProcessAssets","chunk","chunks","manifest","id","name","files","sort","auxiliaryFiles","length","manifestFilename","emitAsset","webpack","sources","RawSource","JSON","stringify","exports"],"sources":["../../src/plugins/ManifestPlugin.ts"],"sourcesContent":["import type { Compiler, RspackPluginInstance } from '@rspack/core';\n\n/**\n * @category Webpack Plugin\n */\nexport class ManifestPlugin implements RspackPluginInstance {\n  /**\n   * Apply the plugin.\n   *\n   * @param compiler Webpack compiler instance.\n   */\n  apply(compiler: Compiler) {\n    compiler.hooks.compilation.tap('ManifestPlugin', (compilation) => {\n      compilation.hooks.afterProcessAssets.tap('ManifestPlugin', () => {\n        for (const chunk of compilation.chunks) {\n          const manifest = {\n            id: chunk.id,\n            name: chunk.name,\n            files: [...chunk.files].sort(),\n            auxiliaryFiles: [...chunk.auxiliaryFiles].sort(),\n          };\n\n          if (manifest.files.length) {\n            const manifestFilename = `${manifest.files[0]}.json`;\n            compilation.emitAsset(\n              manifestFilename,\n              new compiler.webpack.sources.RawSource(JSON.stringify(manifest))\n            );\n          }\n        }\n      });\n    });\n  }\n}\n"],"mappings":";;;;;;AAEA;AACA;AACA;AACO,MAAMA,cAAc,CAAiC;EAC1D;AACF;AACA;AACA;AACA;EACEC,KAAKA,CAACC,QAAkB,EAAE;IACxBA,QAAQ,CAACC,KAAK,CAACC,WAAW,CAACC,GAAG,CAAC,gBAAgB,EAAGD,WAAW,IAAK;MAChEA,WAAW,CAACD,KAAK,CAACG,kBAAkB,CAACD,GAAG,CAAC,gBAAgB,EAAE,MAAM;QAC/D,KAAK,MAAME,KAAK,IAAIH,WAAW,CAACI,MAAM,EAAE;UACtC,MAAMC,QAAQ,GAAG;YACfC,EAAE,EAAEH,KAAK,CAACG,EAAE;YACZC,IAAI,EAAEJ,KAAK,CAACI,IAAI;YAChBC,KAAK,EAAE,CAAC,GAAGL,KAAK,CAACK,KAAK,CAAC,CAACC,IAAI,CAAC,CAAC;YAC9BC,cAAc,EAAE,CAAC,GAAGP,KAAK,CAACO,cAAc,CAAC,CAACD,IAAI,CAAC;UACjD,CAAC;UAED,IAAIJ,QAAQ,CAACG,KAAK,CAACG,MAAM,EAAE;YACzB,MAAMC,gBAAgB,GAAG,GAAGP,QAAQ,CAACG,KAAK,CAAC,CAAC,CAAC,OAAO;YACpDR,WAAW,CAACa,SAAS,CACnBD,gBAAgB,EAChB,IAAId,QAAQ,CAACgB,OAAO,CAACC,OAAO,CAACC,SAAS,CAACC,IAAI,CAACC,SAAS,CAACb,QAAQ,CAAC,CACjE,CAAC;UACH;QACF;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;AACF;AAACc,OAAA,CAAAvB,cAAA,GAAAA,cAAA","ignoreList":[]}