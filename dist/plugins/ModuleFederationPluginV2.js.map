{"version":3,"file":"ModuleFederationPluginV2.js","names":["_estreeUtilIsIdentifierName","require","_isRspackCompiler","ModuleFederationPluginV2","constructor","pluginConfig","defaultRuntimePlugins","reactNativeDeepImports","config","deepImports","validateModuleFederationContainerName","name","isIdentifier","error","Error","stack","undefined","ensureModuleFederationPackageInstalled","context","resolve","paths","adaptRuntimePlugins","runtimePlugins","plugins","map","pluginPath","filter","plugin","includes","unshift","getModuleFederationPlugin","compiler","isRspackCompiler","ModuleFederationPlugin","getDefaultSharedDependencies","react","singleton","eager","adaptSharedDependencies","shared","sharedDependencyConfig","requiredVersion","findSharedDependency","dependencies","Array","isArray","find","item","Boolean","sharedReactNative","reactNativeEager","adjustedSharedDependencies","push","Object","assign","setupIgnoredWarnings","options","ignoreWarnings","warning","moduleDescriptor","isMF2Runtime","endsWith","isMF2RuntimeCore","requestExpressionWarning","test","message","apply","sharedConfig","shareStrategyConfig","shareStrategy","runtimePluginsConfig","webpack","DefinePlugin","FEDERATION_ALLOW_NEW_FUNCTION","exports"],"sources":["../../src/plugins/ModuleFederationPluginV2.ts"],"sourcesContent":["import type { moduleFederationPlugin as MF } from '@module-federation/sdk';\nimport type { Compiler, RspackPluginInstance } from '@rspack/core';\nimport { name as isIdentifier } from 'estree-util-is-identifier-name';\nimport { isRspackCompiler } from './utils/isRspackCompiler.js';\n\ntype JsModuleDescriptor = {\n  identifier: string;\n  name: string;\n  id?: string;\n};\n\n/**\n * {@link ModuleFederationPlugin} configuration options.\n *\n * The fields and types are exactly the same as in the official `ModuleFederationPlugin`.\n *\n * You can check documentation for all supported options here: https://module-federation.io/configure/\n */\nexport interface ModuleFederationPluginV2Config\n  extends MF.ModuleFederationPluginOptions {\n  /**\n   *  List of default runtime plugins for Federation Runtime.\n   *  Useful if you want to modify or disable behaviour of runtime plugins.\n   *\n   *  Defaults to an array containing:\n   *    - '@callstack/repack/mf/core-plugin\n   *    - '@callstack/repack/mf/resolver-plugin\n   */\n  defaultRuntimePlugins?: string[];\n  /** Enable or disable adding React Native deep imports to shared dependencies. Defaults to true */\n  reactNativeDeepImports?: boolean;\n}\n\n/**\n * Webpack plugin to configure Module Federation with platform differences\n * handled under the hood.\n *\n * Usually, you should use `Repack.plugin.ModuleFederationPlugin`\n * instead of `webpack.container.ModuleFederationPlugin`.\n *\n * `Repack.plugin.ModuleFederationPlugin` creates:\n * - default for `filename` option when `exposes` is defined\n * - default for `library` option when `exposes` is defined\n * - default for `shared` option with `react` and `react-native` dependencies\n * - converts `remotes` into `ScriptManager`-powered `promise new Promise` loaders\n *\n * You can overwrite all defaults by passing respective options.\n *\n * `remotes` will always be converted to ScriptManager`-powered `promise new Promise` loaders\n * using {@link Federated.createRemote}.\n *\n * @example Host example.\n * ```js\n * import * as Repack from '@callstack/repack';\n *\n * new Repack.plugins.ModuleFederationPlugin({\n *   name: 'host',\n * });\n * ```\n *\n * @example Host example with additional `shared` dependencies.\n * ```js\n * import * as Repack from '@callstack/repack';\n *\n * new Repack.plugins.ModuleFederationPlugin({\n *   name: 'host',\n *   shared: {\n *     react: Repack.Federated.SHARED_REACT,\n *     'react-native': Repack.Federated.SHARED_REACT,\n *     'react-native-reanimated': {\n *       singleton: true,\n *     },\n *   },\n * });\n * ```\n *\n * @example Container examples.\n * ```js\n * import * as Repack from '@callstack/repack';\n *\n * new Repack.plugins.ModuleFederationPlugin({\n *   name: 'app1',\n *   remotes: {\n *     module1: 'module1@https://example.com/module1.container.bundle',\n *   },\n * });\n *\n * new Repack.plugins.ModuleFederationPlugin({\n *   name: 'app2',\n *   remotes: {\n *     module1: 'module1@https://example.com/module1.container.bundle',\n *     module2: 'module1@dynamic',\n *   },\n * });\n * ```\n *\n * @category Webpack Plugin\n */\nexport class ModuleFederationPluginV2 implements RspackPluginInstance {\n  public config: MF.ModuleFederationPluginOptions;\n  private deepImports: boolean;\n  private defaultRuntimePlugins: string[];\n\n  constructor(pluginConfig: ModuleFederationPluginV2Config) {\n    const { defaultRuntimePlugins, reactNativeDeepImports, ...config } =\n      pluginConfig;\n    this.config = config;\n    this.deepImports = reactNativeDeepImports ?? true;\n    this.defaultRuntimePlugins = defaultRuntimePlugins ?? [\n      '@callstack/repack/mf/core-plugin',\n      '@callstack/repack/mf/resolver-plugin',\n      '@callstack/repack/mf/prefetch-plugin',\n    ];\n  }\n\n  private validateModuleFederationContainerName(name: string | undefined) {\n    if (!name) return;\n    if (!isIdentifier(name)) {\n      const error = new Error(\n        `[RepackModuleFederationPlugin] The container's name: '${name}' must be a valid JavaScript identifier. ` +\n          'Please correct it to proceed. For more information, see: https://developer.mozilla.org/en-US/docs/Glossary/Identifier'\n      );\n      // remove the stack trace to make the error more readable\n      error.stack = undefined;\n      throw error;\n    }\n  }\n\n  private ensureModuleFederationPackageInstalled(context: string) {\n    try {\n      require.resolve('@module-federation/enhanced', { paths: [context] });\n    } catch {\n      throw new Error(\n        \"[RepackModuleFederationPlugin] Dependency '@module-federation/enhanced' is required, but not found in your project. \" +\n          'Did you forget to install it?'\n      );\n    }\n  }\n\n  private adaptRuntimePlugins(\n    context: string,\n    runtimePlugins: string[] | undefined = []\n  ) {\n    const plugins = runtimePlugins\n      .map((pluginPath) => {\n        try {\n          // resolve the paths to compare against absolute paths\n          return require.resolve(pluginPath, { paths: [context] });\n        } catch {\n          // ignore invalid paths\n          return undefined;\n        }\n      })\n      .filter((pluginPath) => !!pluginPath) as string[];\n\n    for (const plugin of this.defaultRuntimePlugins) {\n      const pluginPath = require.resolve(plugin);\n      if (!plugins.includes(pluginPath)) {\n        plugins.unshift(pluginPath);\n      }\n    }\n\n    return plugins;\n  }\n\n  private getModuleFederationPlugin(compiler: Compiler) {\n    if (isRspackCompiler(compiler)) {\n      return require('@module-federation/enhanced/rspack')\n        .ModuleFederationPlugin;\n    }\n    return require('@module-federation/enhanced/webpack')\n      .ModuleFederationPlugin;\n  }\n\n  private getDefaultSharedDependencies() {\n    return {\n      react: { singleton: true, eager: true },\n      'react-native': { singleton: true, eager: true },\n    };\n  }\n\n  /**\n   * As including 'react-native' as a shared dependency is not enough to support\n   * deep imports from 'react-native' (e.g. 'react-native/Libraries/Utilities/PixelRatio'),\n   * we need to add deep imports using an undocumented feature of ModuleFederationPlugin.\n   *\n   * When a dependency has a trailing slash, deep imports of that dependency will be correctly\n   * resolved by reaching out to the shared scope. This also ensures single instances of things\n   * like 'assetsRegistry'. Additionally, we mark every package from '@react-native' group as shared\n   * as well, as these are used by React Native too.\n   *\n   * Reference: https://stackoverflow.com/questions/65636979/wp5-module-federation-sharing-deep-imports\n   * Reference: https://github.com/webpack/webpack/blob/main/lib/sharing/resolveMatchedConfigs.js#L77-L79\n   *\n   * @param shared shared dependencies configuration from ModuleFederationPlugin\n   * @returns adjusted shared dependencies configuration\n   *\n   * @internal\n   */\n  private adaptSharedDependencies(shared: MF.Shared): MF.Shared {\n    const sharedDependencyConfig = (eager?: boolean) => ({\n      singleton: true,\n      eager: eager ?? true,\n      requiredVersion: '*',\n    });\n\n    const findSharedDependency = (\n      name: string,\n      dependencies: MF.Shared\n    ): MF.SharedConfig | string | undefined => {\n      if (Array.isArray(dependencies)) {\n        return dependencies.find((item) =>\n          typeof item === 'string' ? item === name : Boolean(item[name])\n        );\n      }\n      return dependencies[name];\n    };\n\n    const sharedReactNative = findSharedDependency('react-native', shared);\n    const reactNativeEager =\n      typeof sharedReactNative === 'object'\n        ? sharedReactNative.eager\n        : undefined;\n\n    if (!this.deepImports || !sharedReactNative) {\n      return shared;\n    }\n\n    if (Array.isArray(shared)) {\n      const adjustedSharedDependencies = [...shared];\n      if (!findSharedDependency('react-native/', shared)) {\n        adjustedSharedDependencies.push({\n          'react-native/': sharedDependencyConfig(reactNativeEager),\n        });\n      }\n      if (!findSharedDependency('@react-native/', shared)) {\n        adjustedSharedDependencies.push({\n          '@react-native/': sharedDependencyConfig(reactNativeEager),\n        });\n      }\n      return adjustedSharedDependencies;\n    }\n    const adjustedSharedDependencies = { ...shared };\n    if (!findSharedDependency('react-native/', shared)) {\n      Object.assign(adjustedSharedDependencies, {\n        'react-native/': sharedDependencyConfig(reactNativeEager),\n      });\n    }\n    if (!findSharedDependency('@react-native/', shared)) {\n      Object.assign(adjustedSharedDependencies, {\n        '@react-native/': sharedDependencyConfig(reactNativeEager),\n      });\n    }\n    return adjustedSharedDependencies;\n  }\n\n  private setupIgnoredWarnings(compiler: Compiler) {\n    // MF2 produces warning about not supporting async await\n    // we can silence this warning since it works just fine\n    compiler.options.ignoreWarnings = compiler.options.ignoreWarnings ?? [];\n    compiler.options.ignoreWarnings.push(\n      (warning) => warning.name === 'EnvironmentNotSupportAsyncWarning'\n    );\n    // MF2 produces warning about dynamic import in loadEsmEntry but it's not relevant\n    // in RN env since we override the loadEntry logic through a hook\n    // https://github.com/module-federation/core/blob/fa7a0bd20eb64eccd6648fea340c6078a2268e39/packages/runtime/src/utils/load.ts#L28-L37\n    compiler.options.ignoreWarnings.push((warning) => {\n      if ('moduleDescriptor' in warning) {\n        const moduleDescriptor = warning.moduleDescriptor as JsModuleDescriptor;\n\n        // warning can come from either runtime or runtime-core (in newer versions of MF2)\n        const isMF2Runtime = moduleDescriptor.name.endsWith(\n          '@module-federation/runtime/dist/index.cjs.js'\n        );\n        const isMF2RuntimeCore = moduleDescriptor.name.endsWith(\n          '@module-federation/runtime-core/dist/index.cjs.js'\n        );\n\n        if (isMF2Runtime || isMF2RuntimeCore) {\n          const requestExpressionWarning =\n            /Critical dependency: the request of a dependency is an expression/;\n          return requestExpressionWarning.test(warning.message);\n        }\n      }\n\n      return false;\n    });\n  }\n\n  apply(compiler: Compiler) {\n    this.validateModuleFederationContainerName(this.config.name);\n    this.ensureModuleFederationPackageInstalled(compiler.context);\n    this.setupIgnoredWarnings(compiler);\n\n    const ModuleFederationPlugin = this.getModuleFederationPlugin(compiler);\n\n    const sharedConfig = this.adaptSharedDependencies(\n      this.config.shared ?? this.getDefaultSharedDependencies()\n    );\n\n    const shareStrategyConfig = this.config.shareStrategy ?? 'loaded-first';\n\n    const runtimePluginsConfig = this.adaptRuntimePlugins(\n      compiler.context,\n      this.config.runtimePlugins\n    );\n\n    // By setting FEDERATION_ALLOW_NEW_FUNCTION to true, we prevent injecting\n    // dynamic import (marked with webpackIgnore magic comment) into the bundle.\n    // This is problematic when we run the Hermes compiler inside of `HermesBytecodePlugin`\n    // because Hermes doesn't understand dynamic import syntax and throws an error.\n    // Note that `loadEsmEntry` which this workaround affects is not even used in RN\n    // since we provide our own `loadEntry` implementation through a CorePlugin.\n    // https://github.com/module-federation/core/blob/cbd5b7eed1fd13d7256f19664bbe6394d6ad5233/packages/runtime-core/src/utils/load.ts#L29-L38\n    new compiler.webpack.DefinePlugin({\n      FEDERATION_ALLOW_NEW_FUNCTION: true,\n    }).apply(compiler);\n\n    // NOTE: we keep the default library config since it's the most compatible\n    // Default library config uses 'externalType': 'script' and 'type': 'var'\n    // var works identical to 'self' since declaring var in a global scope is\n    // equal to assigning to the globalObject (normalized by Re.Pack to 'self')\n    const config: MF.ModuleFederationPluginOptions = {\n      ...this.config,\n      shared: sharedConfig,\n      shareStrategy: shareStrategyConfig,\n      runtimePlugins: runtimePluginsConfig,\n    };\n\n    new ModuleFederationPlugin(config).apply(compiler);\n  }\n}\n"],"mappings":";;;;;;AAEA,IAAAA,2BAAA,GAAAC,OAAA;AACA,IAAAC,iBAAA,GAAAD,OAAA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAME,wBAAwB,CAAiC;EAKpEC,WAAWA,CAACC,YAA4C,EAAE;IACxD,MAAM;MAAEC,qBAAqB;MAAEC,sBAAsB;MAAE,GAAGC;IAAO,CAAC,GAChEH,YAAY;IACd,IAAI,CAACG,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,WAAW,GAAGF,sBAAsB,IAAI,IAAI;IACjD,IAAI,CAACD,qBAAqB,GAAGA,qBAAqB,IAAI,CACpD,kCAAkC,EAClC,sCAAsC,EACtC,sCAAsC,CACvC;EACH;EAEQI,qCAAqCA,CAACC,IAAwB,EAAE;IACtE,IAAI,CAACA,IAAI,EAAE;IACX,IAAI,CAAC,IAAAC,gCAAY,EAACD,IAAI,CAAC,EAAE;MACvB,MAAME,KAAK,GAAG,IAAIC,KAAK,CACrB,yDAAyDH,IAAI,2CAA2C,GACtG,uHACJ,CAAC;MACD;MACAE,KAAK,CAACE,KAAK,GAAGC,SAAS;MACvB,MAAMH,KAAK;IACb;EACF;EAEQI,sCAAsCA,CAACC,OAAe,EAAE;IAC9D,IAAI;MACFjB,OAAO,CAACkB,OAAO,CAAC,6BAA6B,EAAE;QAAEC,KAAK,EAAE,CAACF,OAAO;MAAE,CAAC,CAAC;IACtE,CAAC,CAAC,MAAM;MACN,MAAM,IAAIJ,KAAK,CACb,sHAAsH,GACpH,+BACJ,CAAC;IACH;EACF;EAEQO,mBAAmBA,CACzBH,OAAe,EACfI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","ignoreList":[]}