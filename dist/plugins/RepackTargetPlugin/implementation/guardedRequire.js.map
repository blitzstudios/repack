{"version":3,"file":"guardedRequire.js","names":["$globalObject$","module","exports","inGuard","originalWebpackRequire","__webpack_require__","guardedWebpackRequire","moduleId","ErrorUtils","e","reportFatalError","Object","getOwnPropertyNames","forEach","key"],"sources":["../../../../src/plugins/RepackTargetPlugin/implementation/guardedRequire.ts"],"sourcesContent":["var $globalObject$: Record<string, any>;\n\nmodule.exports = function () {\n  // This flag prevents nested error handling when __webpack_require__\n  // is called from within another __webpack_require__ call.\n  var inGuard = false;\n  var originalWebpackRequire = __webpack_require__;\n\n  // wrap __webpack_require__ calls to forward errors to global.ErrorUtils\n  // aligned with `guardedLoadModule` behaviour in Metro\n  // https://github.com/facebook/metro/blob/a4cb0b0e483748ef9f1c760cb60c57e3a84c1afd/packages/metro-runtime/src/polyfills/require.js#L329\n  function guardedWebpackRequire(moduleId: string) {\n    if (!inGuard && $globalObject$.ErrorUtils) {\n      inGuard = true;\n      let exports;\n      try {\n        exports = originalWebpackRequire(moduleId);\n      } catch (e) {\n        // exposed as global early on, part of `@react-native/js-polyfills` error-guard\n        // https://github.com/facebook/react-native/blob/4dac99cf6d308e804efc098b37f5c24c1eb611cf/packages/polyfills/error-guard.js#L121\n        $globalObject$.ErrorUtils.reportFatalError(e);\n      }\n      inGuard = false;\n      return exports;\n    } else {\n      return originalWebpackRequire(moduleId);\n    }\n  }\n\n  // Copy all properties from the original function to the wrapped function\n  Object.getOwnPropertyNames(originalWebpackRequire).forEach((key) => {\n    // @ts-ignore\n    guardedWebpackRequire[key] = originalWebpackRequire[key];\n  });\n\n  // @ts-ignore\n  // replace __webpack_require__ with the wrapped version\n  __webpack_require__ = guardedWebpackRequire;\n};\n"],"mappings":"AAAA,IAAIA,cAAmC;AAEvCC,MAAM,CAACC,OAAO,GAAG,YAAY;EAG3B,IAAIC,OAAO,GAAG,KAAK;EACnB,IAAIC,sBAAsB,GAAGC,mBAAmB;EAKhD,SAASC,qBAAqBA,CAACC,QAAgB,EAAE;IAC/C,IAAI,CAACJ,OAAO,IAAIH,cAAc,CAACQ,UAAU,EAAE;MACzCL,OAAO,GAAG,IAAI;MACd,IAAID,OAAO;MACX,IAAI;QACFA,OAAO,GAAGE,sBAAsB,CAACG,QAAQ,CAAC;MAC5C,CAAC,CAAC,OAAOE,CAAC,EAAE;QAGVT,cAAc,CAACQ,UAAU,CAACE,gBAAgB,CAACD,CAAC,CAAC;MAC/C;MACAN,OAAO,GAAG,KAAK;MACf,OAAOD,OAAO;IAChB,CAAC,MAAM;MACL,OAAOE,sBAAsB,CAACG,QAAQ,CAAC;IACzC;EACF;EAGAI,MAAM,CAACC,mBAAmB,CAACR,sBAAsB,CAAC,CAACS,OAAO,CAAEC,GAAG,IAAK;IAElER,qBAAqB,CAACQ,GAAG,CAAC,GAAGV,sBAAsB,CAACU,GAAG,CAAC;EAC1D,CAAC,CAAC;EAIFT,mBAAmB,GAAGC,qBAAqB;AAC7C,CAAC","ignoreList":[]}